meta {
  name: discovery-services-by-a-cpo
  type: http
  seq: 5
}

get {
  url: {{cds_url}}/beckn/discover
  body: json
  auth: inherit
}

headers {
  Content-Type: application/json
}

body:json {
  {
  	"context": {
  		"action": "discover",
  		"bap_id": "app.example.com",
  		"bap_uri": "https://app.example.com/bap",
  		"transaction_id": "2b4d69aa-22e4-4c78-9f56-5a7b9e2b2002",
  		"message_id": "a1eabf26-29f5-4a01-9d4e-4c5c9d1a3d02",
  		"timestamp": "2025-10-14T07:31:00Z",
  		"ttl": "PT30S",
  		"schema_context": [
  			"https://raw.githubusercontent.com/beckn/protocol-specifications-new/refs/heads/draft/schema/EvChargingService/v1/context.jsonld"
  		]
  	},
  	"message": {
  		"filters": {
  			"type": "jsonpath",
  			"expression": "$[?(@.beckn:provider.beckn:id == 'ecopower-charging')]"
  		}
  	}
  }
}

settings {
  encodeUrl: true
  followRedirects: true
}
